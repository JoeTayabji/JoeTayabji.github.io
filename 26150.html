<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Utah Mountain Biking GIS Database</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link rel="shortcut icon" href="images/mapicon.ico">
        <style>
            .figure-container {
                text-align: center;
                margin: 20px 0;
            }
            .figure-caption {
                text-align: center;
                font-style: italic;
                margin-top: 5px;
                margin-bottom: 20px;
            }
            pre {
                background-color: #f5f5f5;
                padding: 15px;
                border-radius: 5px;
                overflow-x: auto;
                font-size: 0.9em;
                margin-bottom: 20px;
            }
            code {
                font-family: "Courier New", monospace;
            }
        </style>
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="https://joetayabji.github.io/" class="logo">
									<span class="symbol"><img src="images/headshot.jpg" alt="" /></span><span class="title">Home</span>
								</a>

							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="https://joetayabji.github.io/">Home</a></li>
							<li><a href="dirslope.html">Directional Slope</a></li>
							<li><a href="caic.html">CAIC Accident Explorer</a></li>
							<li><a href="redbackedshrike.html">Kriging Migration Prediction</a></li>
							<li><a href="rainier.html">Mt. Rainier Glacier Retreat</a></li>
							<li><a href="sar.html">Search and Rescue</a></li>
							<li><a href="leaflet.html">Leaflet</a></li>
							<li><a href="utah-mtb-database.html">Utah MTB GIS Database</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<h1>GEOG 6150: Utah Mountain Biking GIS Database</h1>
                            
                            <h2>Background & Introduction</h2>
                            <p>Maps and spatial data serve as essential tools for both facilitating access and supporting conservation efforts in outdoor recreation areas (Senda-Cook, 2013). The increasing adoption of geospatial technologies has transformed traditional cartography into interactive digital experiences, with platforms like Trailforks and MTB Project utilizing geolocation features to extend trail maps' functionality. These applications provide access to over 100,000 miles of trails and enable real-time location services via GNSS.</p>
                            
                            <div class="figure-container">
                                <img src="images/mtb/utah_trails.jpg" alt="Figure 1: Mountain biking trails in Utah" style="max-width: 700px;" />
                                <p class="figure-caption">Figure 1: Mountain biking trails in Utah</p>
                            </div>
                            
                            <p>Utah is widely recognized for its mountain biking opportunities, with areas like Moab attracting visitors from around the world. The state's diverse terrain and extensive trail networks make it an ideal location for a comprehensive geospatial database focused on mountain biking infrastructure. Land management agencies, including the United States Forest Service (USFS) and Bureau of Land Management (BLM), maintain extensive recreation databases and conduct regular visitor forecasting (Rosenberg & Loomis, 2000). In Utah, these agencies have a particularly strong management presence due to high visitation rates (Zhang & Smith, 2023).</p>
                            
                            <p>While existing applications excel at trail discovery and real-time location services, there remains significant potential for enhanced functionality, particularly in comprehensive trip planning. Critical information such as bike service facilities, campground locations, shower facilities, and emergency medical services are often absent or difficult to integrate. The Utah Mountain Biking GIS Database project addresses this gap by creating a comprehensive spatial database that integrates multiple data sources to support advanced trip planning and resource management for mountain biking in Utah.</p>
                            
                            <h2>Methodology</h2>
                            <p>The database design process began with the development of an Entity-Relationship (ER) diagram to establish the foundational relationships between key spatial and attribute data (Figure 2). This conceptual model guided the identification and acquisition of relevant geospatial datasets.</p>
                            
                            <div class="figure-container">
                                <img src="images/mtb/er_diagram.jpg" alt="Figure 2: ER Diagram" style="max-width: 700px;" />
                                <p class="figure-caption">Figure 2: Entity-Relationship diagram for the Utah Mountain Biking GIS Database</p>
                            </div>
                            
                            <p>Primary geospatial datasets were acquired from the Utah Geospatial Resource Center (UGRC), including shapefiles for trails, ski areas, trailheads, emergency medical services, landmarks, and features. Administrative boundary data (state, county, and city) was sourced from the USDA:NRCS Geospatial Data Gateway. Supplementary information for bike shops and shower facilities was compiled using Google Maps and stored in CSV format with latitude and longitude coordinates.</p>
                            
                            <p>Data processing and integration were performed using QGIS and PostgreSQL/PostGIS. A connection was established between QGIS and the PostgreSQL database via pgAdmin. All spatial data was transformed to a consistent coordinate reference system (NAD83 UTM 12N) and indexed for optimized query performance. The following processing steps were performed:</p>
                            
                            <ol>
                                <li>Imported shapefiles to PostgreSQL/PostGIS schema</li>
                                <li>Converted and imported CSV data with point geometries</li>
                                <li>Created spatial indexes for all tables</li>
                                <li>Generated derived tables through spatial queries</li>
                                <li>Created filtered tables for bike-accessible trails</li>
                                <li>Identified trailheads within 1.5 km of trails</li>
                                <li>Calculated proximity to emergency medical services</li>
                                <li>Exported processed tables back to QGIS for verification</li>
                            </ol>
                            
                            <div class="figure-container">
                                <img src="images/mtb/software_screenshots.jpg" alt="Figure 3: Software screenshots" style="max-width: 700px;" />
                                <p class="figure-caption">Figure 3: Software interface screenshots showing database implementation</p>
                            </div>
                            
                            <p>A key aspect of the database implementation involved SQL development for spatial analysis and data integration. The following sample SQL code demonstrates the creation of a table containing trailheads within 1.5 km of bike-accessible trails, with the addition of information about the nearest emergency medical service:</p>
                            
                            <pre><code>-- Create table of trailheads that are within 1500m of a trail
CREATE TABLE utah_mtb.accessible_trailheads AS
SELECT DISTINCT ON(th.id) th.*
FROM utah_mtb.trailheads th
JOIN utah_mtb.bike_trails_allowed bt
ON ST_DWithin(th.geom, bt.geom, 1500);

-- Add closest EMS facility to trailhead
ALTER TABLE utah_mtb.accessible_trailheads
ADD COLUMN closest_ems VARCHAR(100);

UPDATE utah_mtb.accessible_trailheads th
SET closest_ems = (
    SELECT ems.name
    FROM utah_mtb.emergency_medical_services ems
    ORDER BY th.geom <-> ems.geom
    LIMIT 1
);</code></pre>
                            
                            <p>The database was queried to identify critical information for mountain bike trip planning, such as counties with the highest density of bike trails and trailheads with the greatest distance to emergency services.</p>
                            
                            <h2>Results</h2>
                            <p>The integration of multiple geospatial datasets resulted in a comprehensive database that supports advanced spatial queries relevant to mountain bike trip planning and resource management. Analysis of trail distribution revealed the counties with the highest density of mountain biking trails, providing valuable information for both visitors and land managers.</p>
                            
                            <p>From a safety perspective, the database identified trailheads that were furthest from emergency medical service providers, with Western Rim, East Forks Black Fork, and Piute Pass trailheads being the most remote in terms of emergency service access (Figure 4). This information is particularly valuable for trip safety planning and could inform future emergency service planning.</p>
                            
                            <div class="figure-container">
                                <img src="images/mtb/remote_trailheads.jpg" alt="Figure 4: Remote trailheads" style="max-width: 700px;" />
                                <p class="figure-caption">Figure 4: The three trailheads farthest from a Utah EMS provider</p>
                            </div>
                            
                            <p>The integration of additional facilities data (bike shops, shower facilities, campgrounds) with trail and trailhead information creates a unified resource for comprehensive trip planning. The relational database structure supports complex queries that can answer questions such as:</p>
                            
                            <ul>
                                <li>Which counties contain the most bike-only trails?</li>
                                <li>What trailheads are accessible and within 5 km of shower facilities?</li>
                                <li>Where are campgrounds located within a reasonable distance of multiple trail systems?</li>
                                <li>What is the closest emergency medical service to a specific trailhead?</li>
                            </ul>
                            
                            <p>Sample SQL query results demonstrate the analytical capabilities of the database:</p>
                            
                            <pre><code>-- Counties with most bike trails
SELECT c.countyname, SUM(ST_Length(b.geom))/1000 AS total_trail_km
FROM utah_mtb.counties c
JOIN utah_mtb.bike_trails_allowed b ON ST_Intersects(c.geom, b.geom)
GROUP BY c.countyname
ORDER BY total_trail_km DESC
LIMIT 3;

-- Counties with most bike-only trails
SELECT c.countyname, SUM(ST_Length(b.geom))/1000 AS total_trail_km
FROM utah_mtb.counties c
JOIN utah_mtb.bike_only_trails b ON ST_Intersects(c.geom, b.geom)
GROUP BY c.countyname
ORDER BY total_trail_km DESC
LIMIT 3;

-- Trailheads furthest from EMS facilities
SELECT t.primarynam, MAX(ST_Distance(e.geom, t.geom))/1000 AS max_distance
FROM utah_mtb.accessible_trailheads t
JOIN utah_mtb.emergency_medical_services e ON t.closest_ems = e.name
GROUP BY t.primarynam
ORDER BY max_distance DESC
LIMIT 3;</code></pre>
                            
                            <h2>Discussion & Conclusion</h2>
                            <p>The Utah Mountain Biking GIS Database demonstrates the power of integrating multiple geospatial datasets into a comprehensive resource for outdoor recreation planning. By combining trail data with critical infrastructure information such as emergency services, bike shops, and facilities, the database provides value for multiple stakeholder groups: recreationists planning trips, land managers optimizing resource allocation, and emergency service providers assessing coverage areas.</p>
                            
                            <p>The combined use of QGIS and PostgreSQL/PostGIS proved to be an effective approach, leveraging the visualization capabilities of QGIS with the robust spatial analysis and database management functions of PostGIS. This integration allowed for efficient data processing and analysis while maintaining visualization capabilities.</p>
                            
                            <p>Future development of this system could include data scraping and API integration to gather additional information efficiently. The framework established in this project could be expanded to cover a wider geographic area, including the Four Corners states. Additionally, implementing an interactive web mapping interface would significantly enhance accessibility and usability for end users in the mountain biking community.</p>
                            
                            <p>From a land management perspective, this database could support data-driven decisions about trail development, emergency service placement, and resource allocation. For the mountain biking community, it provides a foundation for comprehensive trip planning that considers both recreational enjoyment and safety considerations.</p>
                            
                            <h2>Skills Used</h2>
                            <ul>
                                <li>Spatial Database Design</li>
                                <li>PostgreSQL/PostGIS Implementation</li>
                                <li>SQL Query Development</li>
                                <li>Entity-Relationship Modeling</li>
                                <li>QGIS and Database Integration</li>
                                <li>Spatial Analysis and Querying</li>
                                <li>Proximity Analysis</li>
                                <li>Coordinate Reference System Transformations</li>
                                <li>Geospatial Data Integration</li>
                                <li>Spatial Index Implementation</li>
                                <li>Multi-source Data Fusion</li>
                                <li>Spatial Visualization</li>
                            </ul>
						</div>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<div class="inner">
							<ul class="copyright">
								<li>&copy; Joseph Tayabji. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
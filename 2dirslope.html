<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Directional Slope: Python Tool for Path Design</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link rel="shortcut icon" href="images/mapicon.ico">
        <style>
            .figure-container {
                text-align: center;
                margin: 20px 0;
            }
            .figure-caption {
                text-align: center;
                font-style: italic;
                margin-top: 5px;
                margin-bottom: 20px;
            }
            .code-block {
                background-color: #f5f5f5;
                border: 1px solid #ddd;
                border-radius: 4px;
                padding: 15px;
                margin: 15px 0;
                overflow-x: auto;
                font-family: monospace;
                font-size: 0.9em;
                white-space: pre-wrap;
                line-height: 1.4;
            }
        </style>
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="https://joetayabji.github.io/" class="logo">
									<span class="symbol"><img src="images/headshot.jpg" alt="" /></span><span class="title">Home</span>
								</a>

							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="https://joetayabji.github.io/">Home</a></li>
							<li><a href="dirslope.html">Directional Slope</a></li>
							<li><a href="caic.html">CAIC Accident Explorer</a></li>
							<li><a href="redbackedshrike.html">Kriging Migration Prediction</a></li>
							<li><a href="rainier.html">Mt. Rainier Glacier Retreat</a></li>
							<li><a href="sar.html">Search and Rescue</a></li>
							<li><a href="leaflet.html">Leaflet</a></li>
							<li><a href="alpine-classification.html">Alpine Land Classification</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<h1>GEOG 6180: Directional Slope - A Python Tool For Path Design</h1>
                            
                            <h2>Background & Introduction</h2>
                            <p>
                                Slope calculation is a fundamental operation in geospatial analysis, particularly for planning routes, trails, roads, and other infrastructure in mountainous terrain. Traditional slope calculations often focus on the maximum slope at a point, which is useful for many applications but doesn't account for directionality. For applications like trail design, understanding how steep a path will be when following a specific direction is crucial.
                            </p>
                            <p>
                                This project implements a directional slope tool that calculates the slope along a specific path, considering both the terrain and the direction of travel. The result is a much more useful metric for path design than traditional slope calculations, as it accounts for the actual steepness that would be experienced when traversing the path.
                            </p>
                            
                            <div class="figure-container">
                                <img src="images/dirslope.jpg" alt="Figure 1: Directional Slope Code Snippet" style="max-width: 600px;" />
                                <p class="figure-caption">Figure 1: Directional Slope Python Code Snippet</p>
                            </div>
                            
                            <h2>Methodology</h2>
                            <p>
                                The directional slope tool takes two inputs: a Digital Elevation Model (DEM) raster and a line shapefile. The output is a new line with directional slope calculated at each segment. The process involves:
                            </p>
                            
                            <ol>
                                <li>Reading the input DEM and line files</li>
                                <li>Resampling the input line at a specified interval (default = 0.5 meters) to create points along the path</li>
                                <li>At each point, calculating the slope using Horn's method (Horn, 1981)</li>
                                <li>Calculating the bearing between consecutive points</li>
                                <li>Using the slope and bearing to determine the directional slope at each segment</li>
                                <li>Creating a new line shapefile with directional slope and bearing attributes</li>
                            </ol>
                            
                            <p>
                                Horn's method was chosen for slope calculation as it is considered more accurate than other methods like the simple 4-neighbor approach, especially in variable terrain. This method is also the default in ESRI ArcGIS products.
                            </p>
                            
                            <p>
                                The actual directional slope calculation uses the following formula (Neteler and Mitášová, 2008):
                            </p>
                            
                            <div class="code-block">
tan_alpha = ((dx*sin(bearing)) + (dy * cos(bearing)))
dir_slope = atan(tan_alpha)*(-180.0)/pi
                            </div>
                            
                            <p>
                                Where dx and dy are the east-west and north-south slopes from Horn's method, and bearing is the direction of travel. The result is a directional slope value where negative values indicate uphill travel and positive values indicate downhill travel.
                            </p>
                            
                            <h2>Implementation</h2>
                            <p>
                                The tool was implemented in Python using GDAL/OGR for raster and vector processing, as well as NumPy and Shapely for mathematical operations and geometry handling. The key components include:
                            </p>
                            
                            <ul>
                                <li><strong>get_horn function:</strong> Calculates slope at a point using Horn's method</li>
                                <li><strong>dir_slope function:</strong> Calculates directional slope between two points</li>
                                <li><strong>Line resampling:</strong> Divides the input line into segments at a specified interval</li>
                                <li><strong>Attribute handling:</strong> Transfers attributes from the input line to the output</li>
                            </ul>
                            
                            <p>
                                Below is an example of the get_horn function, which calculates the slope at a specific point:
                            </p>
                            
                            <div class="code-block">
def get_horn(px, py):
    '''
    The get_horn function is used to calculate slope at one point's location.
    Horn's method (Horn, 1981) is used, which is preferrential for variable terrain.
    Horn's method is also the default in ESRI products.
    The variables a through i reference cells in a 3x3 grid centered around e.
    '''

    # Get a 3x3 NumPy array with DEM values centered at location of px, py
    local_dem = dem_raster.ReadAsArray(px-1, py-1, 3, 3)
    # top left = a
    a = local_dem[0, 0]
    # top center = b
    b = local_dem[0, 1]
    # top right = c
    c = local_dem[0, 2]
    # left = d
    d = local_dem[1, 0]
    # the pixel = e
    e = local_dem[1, 1]
    # right = f
    f = local_dem[1, 2]
    # bottom left = g
    g = local_dem[2, 0]
    # bottom center = h
    h = local_dem[2, 1]
    # bottom right = i
    i = local_dem[2, 2]

    # right column - left column
    dz_dx = ((c+(2*f)+i)-(a+(2*d)+g))/(8*cell_size)
    # top row - bottom row
    dz_dy = ((c+(2*b)+a)-(i+(2*h)+g))/(8*cell_size)

    return dz_dx, dz_dy
                            </div>
                            
                            <h2>Results & Applications</h2>
                            
                            <p>
                                The directional slope tool produces a new line shapefile with segments that contain both bearing and directional slope attributes. These results can be visualized in GIS software to identify steep sections, evaluate trail difficulty, and plan optimal routes.
                            </p>
                            
                            <div class="figure-container">
                                <img src="images/dirslope.jpg" alt="Figure 2: Example output showing directional slope values along a path" style="max-width: 600px;" />
                                <p class="figure-caption">Figure 2: Example output showing directional slope values along a path</p>
                            </div>
                            
                            <p>
                                When applied to real-world data, the directional slope tool provides valuable insights that traditional slope analysis cannot. For example, in mountainous terrain, a path that follows contour lines will show minimal directional slope despite being on steep hillsides. Conversely, a path that goes directly up or down a slope will show the maximum directional slope.
                            </p>
                            
                            <p>
                                The negative values in the output indicate uphill travel while positive values indicate downhill travel, making it easy to interpret the results for path planning purposes.
                            </p>
                            
                            <p>
                                The tool has several practical applications in trail and path design:
                            </p>
                            
                            <ul>
                                <li><strong>Trail Design:</strong> Identifying sections that exceed recommended slope thresholds</li>
                                <li><strong>Route Planning:</strong> Finding optimally graded paths for hiking, biking, or accessibility</li>
                                <li><strong>Infrastructure Development:</strong> Planning roads, utility corridors, and other linear features in mountainous terrain</li>
                                <li><strong>Erosion Analysis:</strong> Predicting areas susceptible to erosion based on slope and direction</li>
                                <li><strong>Accessibility Analysis:</strong> Evaluating trail difficulty for different user groups</li>
                            </ul>
                            
                            <h2>Future Development</h2>
                            <p>
                                This project, originally developed as a standalone Python script, is now being developed into separate QGIS and ArcGIS plugins in collaboration with Dr. Dara Seidl. The QGIS plugin will provide open-source access to the tool, while the ArcGIS plugin will integrate with existing ESRI workflows.
                            </p>
                            
                            <p>
                                Planned enhancements include:
                            </p>
                            
                            <ul>
                                <li>Interactive visualization of results</li>
                                <li>Options for different slope calculation methods</li>
                                <li>Integration with trail standards and guidelines</li>
                                <li>Batch processing capabilities</li>
                                <li>Report generation for trail assessment</li>
                            </ul>
                            
                            <p>
                                <a href="dir_slope_foss_horn.py" target="_blank">The full standalone script can be found here.</a>
                            </p>
                            
                            <h2>Skills Used</h2>
                            <ul>
                                <li>Python Programming</li>
                                <li>Geospatial Libraries (GDAL/OGR, Shapely)</li>
                                <li>Raster Analysis</li>
                                <li>Vector Processing</li>
                                <li>Digital Elevation Model (DEM) Handling</li>
                                <li>Terrain Analysis Algorithms</li>
                                <li>Geospatial Data Formats</li>
                                <li>Tool Development</li>
                                <li>Scientific Computing (NumPy)</li>
                                <li>Technical Documentation</li>
                            </ul>
						</div>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<div class="inner">
							<ul class="copyright">
								<li>&copy; Joseph Tayabji. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>